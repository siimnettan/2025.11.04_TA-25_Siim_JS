<!DOCTYPE html>
<html lang="et">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kastim√§ng</title>
<style>
  body {
    background: #e5e7eb;
    font-family: sans-serif;
    text-align: center;
  }
  #game {
    display: inline-block;
    margin-top: 30px;
    position: relative;
  }
  .wall, .floor {
    width: 60px;
    height: 60px;
    position: absolute;
  }
  .wall { background: #555; }
  .floor { background: #ccc; }
  .goal {
    width: 20px;
    height: 20px;
    background: greenyellow;
    border-radius: 50%;
    position: absolute;
    top: 20px;
    left: 20px;
  }
  .box {
    width: 50px;
    height: 50px;
    background: brown;
    position: absolute;
    top: 5px;
    left: 5px;
  }
  .player {
    width: 50px;
    height: 50px;
    background: orange;
    border-radius: 50%;
    position: absolute;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
  }
</style>
</head>
<body>

<h2>Kastim√§ng</h2>
<p>Liigu nooleklahvidega ja l√ºkka kastid rohelistele mummudele.</p>

<div id="game" style="width:420px; height:360px; background:#555;">
  <!-- P√µrandad -->
  <div class="floor" style="top:60px; left:60px;"></div>
  <div class="floor" style="top:60px; left:120px;"></div>
  <div class="floor" style="top:120px; left:60px;"></div>
  <div class="floor" style="top:120px; left:120px;"></div>
  <div class="floor" style="top:120px; left:180px;"></div>
  <div class="floor" style="top:120px; left:240px;"></div>
  <div class="floor" style="top:120px; left:300px;"></div>
  <div class="floor" style="top:180px; left:60px;"></div>
  <div class="floor" style="top:180px; left:120px;"></div>
  <div class="floor" style="top:180px; left:180px;"></div>
  <div class="floor" style="top:180px; left:240px;"></div>
  <div class="floor" style="top:180px; left:300px;"></div>
  <div class="floor" style="top:240px; left:180px;"></div>
  <div class="floor" style="top:240px; left:240px;"></div>
  <div class="floor" style="top:240px; left:300px;"></div>
  
  <!-- Eesm√§rgid -->
  <div class="goal" id="goal1" style="left:80px; top:80px;"></div>
  <div class="goal" id="goal2" style="left:80px; top:140px;"></div>
  <div class="goal" id="goal3" style="left:200px; top:260px;"></div>

  <!-- M√§ngija -->
  <div class="player" id="player" style="top:185px; left:65px;">üòê</div>

  <!-- Kastid -->
  <div class="box" id="box1" style="left:125px; top:125px;"></div>
  <div class="box" id="box2" style="left:125px; top:185px;"></div>
  <div class="box" id="box3" style="left:245px; top:185px;"></div>
</div>

<script>
  const player = document.getElementById('player');
  const boxes = [
    { el: document.getElementById('box1'), x: 125, y: 125 },
    { el: document.getElementById('box2'), x: 125, y: 185 },
    { el: document.getElementById('box3'), x: 245, y: 185 }
  ];

  const goals = [
    { x: 80, y: 80 },
    { x: 80, y: 140 },
    { x: 200, y: 260 }
  ];

  // P√µrandate koordinaadid
  const floors = [
    { x: 60, y: 60 }, { x: 120, y: 60 },
    { x: 60, y: 120 }, { x: 120, y: 120 },
    { x: 180, y: 120 }, { x: 240, y: 120 }, { x: 300, y: 120 },
    { x: 60, y: 180 }, { x: 120, y: 180 }, { x: 180, y: 180 },
    { x: 240, y: 180 }, { x: 300, y: 180 },
    { x: 180, y: 240 }, { x: 240, y: 240 }, { x: 300, y: 240 }
  ];

  function isFloor(x, y) {
    return floors.some(f => f.x + 5 === x && f.y + 5 === y);
  }

  let playerX = 65;
  let playerY = 185;

  document.addEventListener('keydown', function(e) {
    let newX = playerX;
    let newY = playerY;

    if (e.key === 'ArrowRight') newX += 60;
    if (e.key === 'ArrowLeft') newX -= 60;
    if (e.key === 'ArrowUp') newY -= 60;
    if (e.key === 'ArrowDown') newY += 60;

    // Kontroll, et m√§ngija liigub p√µrandale
    if (!isFloor(newX, newY)) return;

    // Kontroll, kas m√§ngija liigub m√µne kasti peale
    let pushedBox = boxes.find(b => b.x === newX && b.y === newY);
    if (pushedBox) {
      let newBoxX = pushedBox.x;
      let newBoxY = pushedBox.y;

      if (e.key === 'ArrowRight') newBoxX += 60;
      if (e.key === 'ArrowLeft') newBoxX -= 60;
      if (e.key === 'ArrowUp') newBoxY -= 60;
      if (e.key === 'ArrowDown') newBoxY += 60;

      // Kontroll, et kast liigub p√µrandale
      if (!isFloor(newBoxX, newBoxY)) return;

      // Kontroll, et kast ei l√ºkka teist kasti
      if (boxes.some(b => b !== pushedBox && b.x === newBoxX && b.y === newBoxY)) return;

      pushedBox.x = newBoxX;
      pushedBox.y = newBoxY;
      pushedBox.el.style.left = pushedBox.x + 'px';
      pushedBox.el.style.top = pushedBox.y + 'px';
    }

    playerX = newX;
    playerY = newY;
    player.style.left = playerX + 'px';
    player.style.top = playerY + 'px';

    // Kontroll, kas k√µik kastid on eesm√§rkidel
    if (boxes.every(b => goals.some(g => Math.abs(b.x - g.x) < 20 && Math.abs(b.y - g.y) < 20))) {
      player.textContent = 'üòÑ';
      alert('Tubli! K√µik 3 kasti on kohal!');
    }
  });
</script>

</body>
</html>